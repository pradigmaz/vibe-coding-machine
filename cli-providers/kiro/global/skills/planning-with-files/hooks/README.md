# Planning with Files Hooks –¥–ª—è Kiro CLI

–•—É–∫–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ planning-with-files workflow –≤ Kiro CLI.

## –ß—Ç–æ —ç—Ç–æ?

–•—É–∫–∏ - —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–∞:
- **promptSubmit** - –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ø—Ä–æ–º–ø—Ç–∞ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–ª–∞–Ω)
- **agentStop** - –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –∞–≥–µ–Ω—Ç–∞ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è)

## –î–≤–∞ —Å–ø–æ—Å–æ–±–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### –°–ø–æ—Å–æ–± 1: –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ö—É–∫–∏ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

–ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ö—É–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –¥–ª—è –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

**–£–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤:**
- `cli-providers/kiro/global/hooks/planning-with-files.json` - –ø–æ–∫–∞–∑ –ø–ª–∞–Ω–∞
- `cli-providers/kiro/global/hooks/planning-check-complete.json` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

**–ß—Ç–æ –¥–µ–ª–∞—é—Ç:**
1. **planning-with-files.json** (promptSubmit):
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ task_plan.md
   - –ß–∏—Ç–∞–µ—Ç –ø–µ—Ä–≤—ã–µ 30 —Å—Ç—Ä–æ–∫
   - –û—Å–≤–µ–∂–∞–µ—Ç —Ü–µ–ª–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∞–≥–µ–Ω—Ç–∞

2. **planning-check-complete.json** (agentStop):
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å—ã –≤—Å–µ—Ö —Ñ–∞–∑
   - –ù–∞–ø–æ–º–∏–Ω–∞–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å—ã
   - –°–æ–æ–±—â–∞–µ—Ç –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏

**–ê–∫—Ç–∏–≤–∞—Ü–∏—è:**
–•—É–∫–∏ –∞–∫—Ç–∏–≤–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤ Kiro CLI.

### –°–ø–æ—Å–æ–± 2: –•—É–∫–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç–∞

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ö—É–∫–∏ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è).

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å (–°–ø–æ—Å–æ–± 2)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∞–≥–µ–Ω—Ç–∞

–°–∫–æ–ø–∏—Ä—É–π —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `planning-hooks-example.json` –≤ –ø–æ–ª–µ `hooks` —Ç–≤–æ–µ–≥–æ –∞–≥–µ–Ω—Ç–∞:

```json
{
  "name": "my-agent",
  "hooks": {
    "userPromptSubmit": [
      {
        "command": "bash",
        "args": ["-c", "if [ -f task_plan.md ]; then head -30 task_plan.md; fi"],
        "timeout_ms": 5000,
        "cache_ttl_seconds": 60
      }
    ],
    "preToolUse": [
      {
        "matcher": "fs_write|fs_edit",
        "command": "bash",
        "args": ["-c", "if [ -f task_plan.md ]; then echo 'üìã –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: –û–±–Ω–æ–≤–∏ task_plan.md –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π' >&2; fi"],
        "timeout_ms": 5000
      }
    ],
    "stop": [
      {
        "command": "bash",
        "args": ["-c", "if [ -f task_plan.md ]; then echo '\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nüìä –ü–†–û–í–ï–†–ö–ê –ó–ê–í–ï–†–®–ï–ù–ò–Ø\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n'; TOTAL=$(grep -c \"### Phase\" task_plan.md 2>/dev/null || echo 0); COMPLETE=$(grep -cF \"**Status:** complete\" task_plan.md 2>/dev/null || echo 0); echo \"–í—Å–µ–≥–æ —Ñ–∞–∑: $TOTAL\"; echo \"–ó–∞–≤–µ—Ä—à–µ–Ω–æ: $COMPLETE\"; if [ \"$COMPLETE\" -eq \"$TOTAL\" ] && [ \"$TOTAL\" -gt 0 ]; then echo '\n‚úÖ –í–°–ï –§–ê–ó–´ –ó–ê–í–ï–†–®–ï–ù–´'; else echo '\n‚ö†Ô∏è  –ó–ê–î–ê–ß–ê –ù–ï –ó–ê–í–ï–†–®–ï–ù–ê'; echo '–û–±–Ω–æ–≤–∏ —Å—Ç–∞—Ç—É—Å—ã —Ñ–∞–∑ –≤ task_plan.md'; fi; echo '‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ'; fi"],
        "timeout_ms": 10000
      }
    ]
  }
}
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

–°–æ–∑–¥–∞–π —Å–∫—Ä–∏–ø—Ç—ã –≤ `.kiro/hooks/`:

**`.kiro/hooks/show-plan.sh`:**
```bash
#!/bin/bash
if [ -f task_plan.md ]; then
  head -30 task_plan.md
fi
```

**`.kiro/hooks/check-complete.sh`:**
```bash
#!/bin/bash
if [ -f task_plan.md ]; then
  echo ""
  echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
  echo "üìä –ü–†–û–í–ï–†–ö–ê –ó–ê–í–ï–†–®–ï–ù–ò–Ø"
  echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
  
  TOTAL=$(grep -c "### Phase" task_plan.md 2>/dev/null || echo 0)
  COMPLETE=$(grep -cF "**Status:** complete" task_plan.md 2>/dev/null || echo 0)
  
  echo "–í—Å–µ–≥–æ —Ñ–∞–∑: $TOTAL"
  echo "–ó–∞–≤–µ—Ä—à–µ–Ω–æ: $COMPLETE"
  echo ""
  
  if [ "$COMPLETE" -eq "$TOTAL" ] && [ "$TOTAL" -gt 0 ]; then
    echo "‚úÖ –í–°–ï –§–ê–ó–´ –ó–ê–í–ï–†–®–ï–ù–´"
  else
    echo "‚ö†Ô∏è  –ó–ê–î–ê–ß–ê –ù–ï –ó–ê–í–ï–†–®–ï–ù–ê"
    echo "–û–±–Ω–æ–≤–∏ —Å—Ç–∞—Ç—É—Å—ã —Ñ–∞–∑ –≤ task_plan.md"
  fi
  
  echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
fi
```

–ó–∞—Ç–µ–º –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç–∞:
```json
{
  "hooks": {
    "userPromptSubmit": [
      {
        "command": "bash",
        "args": [".kiro/hooks/show-plan.sh"],
        "timeout_ms": 5000,
        "cache_ttl_seconds": 60
      }
    ],
    "stop": [
      {
        "command": "bash",
        "args": [".kiro/hooks/check-complete.sh"],
        "timeout_ms": 10000
      }
    ]
  }
}
```

## –û–ø–∏—Å–∞–Ω–∏–µ —Ö—É–∫–æ–≤

### 1. userPromptSubmit - –ü–æ–∫–∞–∑ –ø–ª–∞–Ω–∞

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–≤—ã–µ 30 —Å—Ç—Ä–æ–∫ `task_plan.md` –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –ø—Ä–æ–º–ø—Ç–æ–º

**–ó–∞—á–µ–º:** –î–µ—Ä–∂–∏—Ç —Ü–µ–ª–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∞–≥–µ–Ω—Ç–∞ (–ø—Ä–∏–Ω—Ü–∏–ø Manus - –º–∞–Ω–∏–ø—É–ª—è—Ü–∏—è –≤–Ω–∏–º–∞–Ω–∏–µ–º)

**–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** 60 —Å–µ–∫—É–Ω–¥ (–Ω–µ –ø–µ—Ä–µ—á–∏—Ç—ã–≤–∞–µ—Ç —Ñ–∞–π–ª –µ—Å–ª–∏ –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è)

### 2. preToolUse - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Å—å—é/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ñ–∞–π–ª–æ–≤

**–ó–∞—á–µ–º:** –ù–∞–ø–æ–º–∏–Ω–∞–µ—Ç –∞–≥–µ–Ω—Ç—É –æ–±–Ω–æ–≤–∏—Ç—å `task_plan.md` –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**Matcher:** `fs_write|fs_edit` - —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –∑–∞–ø–∏—Å—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 3. stop - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∫–æ–ª—å–∫–æ —Ñ–∞–∑ –∑–∞–≤–µ—Ä—à–µ–Ω–æ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –∞–≥–µ–Ω—Ç–∞

**–ó–∞—á–µ–º:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–µ—Ç –æ –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö —Ñ–∞–∑–∞—Ö

**–§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞:**
```
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üìä –ü–†–û–í–ï–†–ö–ê –ó–ê–í–ï–†–®–ï–ù–ò–Ø
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
–í—Å–µ–≥–æ —Ñ–∞–∑: 5
–ó–∞–≤–µ—Ä—à–µ–Ω–æ: 3

‚ö†Ô∏è  –ó–ê–î–ê–ß–ê –ù–ï –ó–ê–í–ï–†–®–ï–ù–ê
–û–±–Ω–æ–≤–∏ —Å—Ç–∞—Ç—É—Å—ã —Ñ–∞–∑ –≤ task_plan.md
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
```

## Windows (PowerShell)

–î–ª—è Windows —Å–æ–∑–¥–∞–π PowerShell –≤–µ—Ä—Å–∏–∏:

**`.kiro/hooks/show-plan.ps1`:**
```powershell
if (Test-Path "task_plan.md") {
  Get-Content "task_plan.md" -Head 30
}
```

**`.kiro/hooks/check-complete.ps1`:**
```powershell
if (Test-Path "task_plan.md") {
  Write-Host ""
  Write-Host "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
  Write-Host "üìä –ü–†–û–í–ï–†–ö–ê –ó–ê–í–ï–†–®–ï–ù–ò–Ø"
  Write-Host "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
  
  $content = Get-Content "task_plan.md" -Raw
  $TOTAL = ([regex]::Matches($content, "### Phase")).Count
  $COMPLETE = ([regex]::Matches($content, "\*\*Status:\*\* complete")).Count
  
  Write-Host "–í—Å–µ–≥–æ —Ñ–∞–∑: $TOTAL"
  Write-Host "–ó–∞–≤–µ—Ä—à–µ–Ω–æ: $COMPLETE"
  Write-Host ""
  
  if ($COMPLETE -eq $TOTAL -and $TOTAL -gt 0) {
    Write-Host "‚úÖ –í–°–ï –§–ê–ó–´ –ó–ê–í–ï–†–®–ï–ù–´"
  } else {
    Write-Host "‚ö†Ô∏è  –ó–ê–î–ê–ß–ê –ù–ï –ó–ê–í–ï–†–®–ï–ù–ê"
    Write-Host "–û–±–Ω–æ–≤–∏ —Å—Ç–∞—Ç—É—Å—ã —Ñ–∞–∑ –≤ task_plan.md"
  }
  
  Write-Host "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
}
```

–í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
```json
{
  "hooks": {
    "userPromptSubmit": [
      {
        "command": "powershell",
        "args": ["-ExecutionPolicy", "Bypass", "-File", ".kiro/hooks/show-plan.ps1"],
        "timeout_ms": 5000,
        "cache_ttl_seconds": 60
      }
    ]
  }
}
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ timeout –∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

### timeout_ms
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: 30000 (30 —Å–µ–∫—É–Ω–¥)
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 5000-10000 –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∫–æ–º–∞–Ω–¥

### cache_ttl_seconds
- `0` - –±–µ–∑ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `> 0` - –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ N —Å–µ–∫—É–Ω–¥
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 60 –¥–ª—è `userPromptSubmit` (–ø–ª–∞–Ω –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è —á–∞—Å—Ç–æ)

## Exit –∫–æ–¥—ã

–•—É–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç exit –∫–æ–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º:

| Exit –∫–æ–¥ | –ü–æ–≤–µ–¥–µ–Ω–∏–µ |
|----------|-----------|
| 0 | –£—Å–ø–µ—Ö. STDOUT –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç |
| 2 | (—Ç–æ–ª—å–∫–æ preToolUse) –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ |
| –î—Ä—É–≥–∏–µ | –û—à–∏–±–∫–∞. STDERR –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ warning |

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–¢–æ–ª—å–∫–æ –ø–æ–∫–∞–∑ –ø–ª–∞–Ω–∞ –ø–µ—Ä–µ–¥ –ø—Ä–æ–º–ø—Ç–æ–º:
```json
{
  "hooks": {
    "userPromptSubmit": [
      {
        "command": "bash",
        "args": ["-c", "[ -f task_plan.md ] && head -30 task_plan.md || true"],
        "cache_ttl_seconds": 60
      }
    ]
  }
}
```

### –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í—Å–µ —Ç—Ä–∏ —Ö—É–∫–∞:
```json
{
  "hooks": {
    "userPromptSubmit": [
      {
        "command": "bash",
        "args": [".kiro/hooks/show-plan.sh"],
        "cache_ttl_seconds": 60
      }
    ],
    "preToolUse": [
      {
        "matcher": "fs_write|fs_edit",
        "command": "bash",
        "args": ["-c", "[ -f task_plan.md ] && echo 'üìã –û–±–Ω–æ–≤–∏ task_plan.md' >&2 || true"]
      }
    ],
    "stop": [
      {
        "command": "bash",
        "args": [".kiro/hooks/check-complete.sh"]
      }
    ]
  }
}
```

## –û—Ç–ª–∞–¥–∫–∞

–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ö—É–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç:

```bash
# –¢–µ—Å—Ç show-plan
bash .kiro/hooks/show-plan.sh

# –¢–µ—Å—Ç check-complete
bash .kiro/hooks/check-complete.sh

# –ü—Ä–æ–≤–µ—Ä—å exit –∫–æ–¥
echo $?  # –î–æ–ª–∂–µ–Ω –±—ã—Ç—å 0
```

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–¢–æ–ª—å–∫–æ shell –∫–æ–º–∞–Ω–¥—ã** - —Ö—É–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç shell –∫–æ–º–∞–Ω–¥—ã, –Ω–µ –º–æ–≥—É—Ç –Ω–∞–ø—Ä—è–º—É—é –≤—ã–∑—ã–≤–∞—Ç—å –∞–≥–µ–Ω—Ç–∞
2. **Timeout** - –∫–æ–º–∞–Ω–¥—ã –¥–æ–ª–∂–Ω—ã –∑–∞–≤–µ—Ä—à–∞—Ç—å—Å—è –±—ã—Å—Ç—Ä–æ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30 —Å–µ–∫)
3. **–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –∞–≥–µ–Ω—Ç–∞** - —Ö—É–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π
4. **agentSpawn —Ö—É–∫–∏ –Ω–µ –∫–µ—à–∏—Ä—É—é—Ç—Å—è** - –≤—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∑–∞–Ω–æ–≤–æ

## –†–µ—Å—É—Ä—Å—ã

- [Kiro CLI Hooks Documentation](https://kiro.dev/docs/cli/hooks/)
- [Agent Configuration Reference](https://kiro.dev/docs/cli/custom-agents/configuration-reference/)
- [Planning with Files Skill](../SKILL.md)
